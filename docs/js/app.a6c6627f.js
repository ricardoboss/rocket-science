(function(t){function e(e){for(var o,s,a=e[0],c=e[1],h=e[2],k=0,p=[];k<a.length;k++)s=a[k],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(p.length)p.shift()();return n.push.apply(n,h||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],o=!0,a=1;a<i.length;a++){var c=i[a];0!==r[c]&&(o=!1)}o&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},r={app:0},n=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var h=0;h<a.length;h++)e(a[h]);var l=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);var o=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Game")},n=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{ref:"main_stage",attrs:{id:"main_stage",config:t.configKonva},on:{resize:t.resizeCanvas}},[i("v-layer",[i("v-ellipse",{attrs:{config:t.orbitConfig}}),i("v-circle",{attrs:{config:t.planetConfig}})],1),i("v-layer",{ref:"path_layer"},[i("v-line",{attrs:{config:{points:t.path_marks,stroke:"white",strokeWidth:1,opacity:.02}}})],1),i("v-layer",[i("v-arrow",{attrs:{config:t.rocketConfig}}),i("v-arrow",{attrs:{config:t.rocketVectorConfig}})],1),i("v-layer",[i("v-text",{attrs:{config:{x:10,y:10,fill:"white",text:"pos: x: "+this.rocketPosition.x.toFixed(2)+" y: "+this.rocketPosition.y.toFixed(2)+" phi: "+this.rocketPosition.phi.toFixed(2)}}}),i("v-text",{attrs:{config:{x:10,y:25,fill:"white",text:"vel: x: "+this.rocketVelocity.x.toFixed(2)+" y: "+this.rocketVelocity.y.toFixed(2)+" phi: "+this.rocketVelocity.phi.toFixed(2)}}}),i("v-text",{attrs:{config:{x:10,y:40,fill:"white",text:"distance: "+this.distanceBetweenCenters.toFixed(2)}}}),i("v-text",{attrs:{config:{x:10,y:55,fill:"white",text:"boosting: "+(this.boost?"yes":"no")}}}),i("v-text",{attrs:{config:{x:10,y:70,fill:"white",text:"tracking trajectory: "+(!0===this.track_path?"yes":!1===this.track_path?"yes (reversed)":"no")}}})],1),i("v-layer",[i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-20,fill:"white",text:"Space - toggle tracking direction"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-35,fill:"white",text:"F - toggle tracking trajectory"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-50,fill:"white",text:"S - slow down spin"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-65,fill:"white",text:"A/D - spin left/right"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-80,fill:"white",text:"W - boost"}}})],1),i("v-layer",[i("v-circle",{attrs:{config:{x:this.configKonva.width/2,y:this.configKonva.height-50,radius:50,fill:"black",stroke:"white",strokeWidth:1}}}),i("v-arrow",{attrs:{config:t.previewRocketConfig}}),i("v-arrow",{attrs:{config:t.previewRocketVectorConfig}})],1)],1)},a=[];const c=Math.PI/180,h=6.6742,l=75,k=10,p=5,y=.1,f=6;var d={name:"Game",created(){window.addEventListener("resize",this.resizeCanvas),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)},destroyed(){window.removeEventListener("resize",this.resizeCanvas),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),clearInterval(this.gameTickInterval)},mounted(){this.resizeCanvas(),this.gameTickInterval=setInterval(()=>this.gameTick(),10)},data(){return{gameTickInterval:-1,resizeTrigger:!1,planetRotation:0,rocketLanded:!0,rocketLandingOffset:0,rocketVelocity:{x:0,y:0,phi:0},rocketPosition:{x:0,y:0,phi:0},distanceBetweenCenters:0,planetToRocket:{x:0,y:0},boost:!1,rotate:null,track_path:null,orbit:{center:{x:0,y:0},radius:{x:0,y:0}},path_marks:[]}},methods:{gameTick(){this.planetRotation=(this.planetRotation+.1)%360,this.distanceBetweenCenters=Math.sqrt(Math.pow(this.planetConfig.x-this.rocketPosition.x,2)+Math.pow(this.planetConfig.y-this.rocketPosition.y,2)),this.planetToRocket.x=(this.rocketPosition.x-this.planetConfig.x)/this.distanceBetweenCenters,this.planetToRocket.y=(this.rocketPosition.y-this.planetConfig.y)/this.distanceBetweenCenters;let t=this.distanceBetweenCenters-(p/2+l/2);if(t<p&&(this.rocketLanded=!0,this.rocketLandingOffset=this.planetRotation),this.rocketLanded)this.rocketPosition.x=this.planetConfig.x+Math.cos((this.planetRotation+this.rocketLandingOffset)*c)*(l+p/2),this.rocketPosition.y=this.planetConfig.y+Math.sin((this.planetRotation+this.rocketLandingOffset)*c)*(l+p/2),this.rocketPosition.phi=this.planetRotation+this.rocketLandingOffset,this.orbit.radius.x=l+p/2,this.orbit.radius.y=l+p/2,this.rocketVelocity.x=0,this.rocketVelocity.y=0,this.rocketVelocity.phi=0;else{if(this.boost){let t=.003,e={x:Math.cos(this.rocketPosition.phi*c)*t,y:Math.sin(this.rocketPosition.phi*c)*t};this.rocketVelocity.x+=e.x,this.rocketVelocity.y+=e.y}this.rotate>0?this.rocketVelocity.phi+=.05:this.rotate<0?this.rocketVelocity.phi-=.05:0===this.rotate&&(this.rocketVelocity.phi*=.99);let e=h*(k*y)/t,i={x:e*this.planetToRocket.x,y:e*this.planetToRocket.y};this.rocketVelocity.x-=i.x,this.rocketVelocity.y-=i.y,this.rocketVelocity.phi%=360,this.rocketPosition.x+=this.rocketVelocity.x,this.rocketPosition.y+=this.rocketVelocity.y,!0===this.track_path?this.rocketPosition.phi=Math.atan2(this.rocketVelocity.y,this.rocketVelocity.x)/c:!1===this.track_path?this.rocketPosition.phi=Math.atan2(this.rocketVelocity.y,this.rocketVelocity.x)/c-180:this.rocketPosition.phi+=this.rocketVelocity.phi,this.rocketPosition.phi%=360,this.orbit.radius.x=this.distanceBetweenCenters,this.orbit.radius.y=this.distanceBetweenCenters}this.path_marks.push(this.rocketPosition.x),this.path_marks.push(this.rocketPosition.y),this.$refs.path_layer.getNode().draw()},resizeCanvas(){this.resizeTrigger=!this.resizeTrigger,this.orbit.center.x=this.planetConfig.x,this.orbit.center.y=this.planetConfig.y},keydown(t){switch(t.keyCode){case 87:this.rocketLanded?(this.rocketLanded=!1,this.rocketVelocity.x=this.planetToRocket.x*f,this.rocketVelocity.y=this.planetToRocket.y*f,this.rocketPosition.phi=this.planetRotation+90):this.boost=!0;break;case 65:this.rocketLanded||(this.rotate=-1);break;case 68:this.rocketLanded||(this.rotate=1);break;case 70:this.rocketVelocity.phi=0,null===this.track_path?this.track_path=!0:this.track_path=null;break;case 32:this.track_path=!this.track_path;break;case 83:this.rocketLanded||(this.rotate=0);break;default:console.log(t.keyCode);break}},keyup(t){switch(t.keyCode){case 87:this.boost=!1;break;case 65:case 68:case 83:this.rocketLanded||(this.rotate=null);break}}},computed:{configKonva(){return this.resizeTrigger,{width:window.innerWidth,height:window.innerHeight}},planetConfig(){return{x:this.configKonva.width/2,y:this.configKonva.height/2,fill:"blue",rotation:this.planetRotation,radius:l}},rocketConfig(){return{points:[1,1],x:this.rocketPosition.x,y:this.rocketPosition.y,fill:"green",rotation:this.rocketPosition.phi,pointerWidth:4*p/5,pointerLength:p,stroke:"green"}},previewRocketConfig(){return{points:[0,0],x:this.configKonva.width/2,y:this.configKonva.height-50,fill:"green",rotation:this.rocketPosition.phi,pointerWidth:4*p/5,pointerLength:p,stroke:"green"}},rocketVectorConfig(){return{points:[5*this.rocketVelocity.x,5*this.rocketVelocity.y,10*this.rocketVelocity.x,10*this.rocketVelocity.y],x:this.rocketPosition.x,y:this.rocketPosition.y,fill:"red",stroke:"red",pointerWidth:3,pointerLength:3}},previewRocketVectorConfig(){return{points:[5*this.rocketVelocity.x,5*this.rocketVelocity.y,10*this.rocketVelocity.x,10*this.rocketVelocity.y],x:this.configKonva.width/2,y:this.configKonva.height-50,fill:"red",stroke:"red",pointerWidth:3,pointerLength:3}},orbitConfig(){return{radius:{x:this.orbit.radius.x,y:this.orbit.radius.y},x:this.orbit.center.x,y:this.orbit.center.y,stroke:"gray",strokeWidth:.25,fillEnabled:!1}}}},g=d,u=(i("aa7d"),i("2877")),x=Object(u["a"])(g,s,a,!1,null,"9c15b158",null),v=x.exports,w={name:"App",components:{Game:v}},b=w,V=(i("5c0b"),Object(u["a"])(b,r,n,!1,null,null,null)),C=V.exports,P=i("2f62");o["default"].use(P["a"]);var m=new P["a"].Store({state:{},mutations:{},actions:{},modules:{}}),_=i("7591"),L=i.n(_);o["default"].use(L.a),o["default"].config.productionTip=!1,new o["default"]({store:m,render:function(t){return t(C)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"9c0c":function(t,e,i){},aa7d:function(t,e,i){"use strict";i("da54")},da54:function(t,e,i){}});
//# sourceMappingURL=app.a6c6627f.js.map