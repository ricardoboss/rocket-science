(function(t){function e(e){for(var o,s,h=e[0],a=e[1],c=e[2],k=0,p=[];k<h.length;k++)s=h[k],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],o=!0,h=1;h<i.length;h++){var a=i[h];0!==n[a]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},n={app:0},r=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var h=window["webpackJsonp"]=window["webpackJsonp"]||[],a=h.push.bind(h);h.push=e,h=h.slice();for(var c=0;c<h.length;c++)e(h[c]);var l=a;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);var o=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Game")},r=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{attrs:{id:"main_stage",config:t.configKonva},on:{resize:t.resizeCanvas}},[i("v-layer",{ref:"path_layer"},[i("v-line",{attrs:{config:{points:t.path_marks,stroke:"white",strokeWidth:1,opacity:.05}}})],1),i("v-layer",[i("v-circle",{attrs:{config:t.planetConfig}})],1),i("v-layer",[i("v-arrow",{attrs:{config:t.gravityVectorConfig}}),i("v-arrow",{attrs:{config:t.rocketVectorConfig}}),i("v-arrow",{attrs:{config:t.rocketConfig}})],1),i("v-layer",[i("v-group",[i("v-text",{attrs:{config:{x:10,y:10,fill:"white",text:"pos: x: "+this.rocketPosition.x.toFixed(2)+" y: "+this.rocketPosition.y.toFixed(2)+" phi: "+this.rocketPosition.phi.toFixed(2)}}}),i("v-text",{attrs:{config:{x:10,y:25,fill:"white",text:"vel: x: "+this.rocketVelocity.x.toFixed(2)+" y: "+this.rocketVelocity.y.toFixed(2)+" phi: "+this.rocketVelocity.phi.toFixed(2)}}}),i("v-text",{attrs:{config:{x:10,y:40,fill:"white",text:"distance: "+(this.distanceBetweenCenters-this.planetRadius-this.rocketRadius/2).toFixed(2)}}}),i("v-text",{attrs:{config:{x:10,y:55,fill:"white",text:"boosting: "+(this.boost?"yes":"no")}}}),i("v-text",{attrs:{config:{x:10,y:70,fill:"white",text:"tracking trajectory: "+(!0===this.track_path?"yes":!1===this.track_path?"yes (reversed)":"no")}}})],1),i("v-group",[i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-20,fill:"white",text:"Space - toggle tracking direction"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-35,fill:"white",text:"F - toggle tracking trajectory"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-50,fill:"white",text:"S - slow down spin"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-65,fill:"white",text:"A/D - spin left/right"}}}),i("v-text",{attrs:{config:{x:10,y:this.configKonva.height-80,fill:"white",text:"W - boost"}}})],1),i("v-group",[i("v-circle",{attrs:{config:{x:this.configKonva.width/2,y:this.configKonva.height-50,radius:50,fill:"black",stroke:"white",strokeWidth:1}}}),i("v-arrow",{attrs:{config:t.previewPlanetVectorConfig}}),i("v-arrow",{attrs:{config:t.previewRocketVectorConfig}}),i("v-arrow",{attrs:{config:t.previewRocketConfig}})],1)],1)],1)},h=[];const a=Math.PI/180,c=6.6742,l=100,k=1e4,p=5,y=.1,f=5,d=.02,g=.1,u=.999999,v=1e4;var x={name:"Game",created(){window.addEventListener("resize",this.resizeCanvas),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)},destroyed(){window.removeEventListener("resize",this.resizeCanvas),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),clearInterval(this.gameTickInterval)},mounted(){this.resizeCanvas(),this.gameTickInterval=setInterval(()=>this.gameTick(),20)},data(){return{gameTickInterval:-1,resizeTrigger:!1,planetRotation:0,planetRadius:l,rocketRadius:p,rocketLanded:!0,rocketLandingOffset:0,rocketVelocity:{x:0,y:0,phi:0},rocketPosition:{x:0,y:0,phi:0},distanceBetweenCenters:0,planetToRocket:{x:0,y:0},gravity:{x:0,y:0},boost:!1,rotate:null,track_path:null,path_marks:[]}},methods:{gameTick(){if(this.planetRotation=(this.planetRotation+.1)%360,this.distanceBetweenCenters=Math.sqrt(Math.pow(this.planetConfig.x-this.rocketPosition.x,2)+Math.pow(this.planetConfig.y-this.rocketPosition.y,2)),this.planetToRocket.x=(this.rocketPosition.x-this.planetConfig.x)/this.distanceBetweenCenters,this.planetToRocket.y=(this.rocketPosition.y-this.planetConfig.y)/this.distanceBetweenCenters,this.distanceBetweenCenters<p/2+l-g&&(this.rocketLanded=!0,this.rocketLandingOffset=this.planetRotation),this.rocketLanded)this.rocketPosition.x=this.planetConfig.x+Math.cos((this.planetRotation+this.rocketLandingOffset)*a)*(l+p/2),this.rocketPosition.y=this.planetConfig.y+Math.sin((this.planetRotation+this.rocketLandingOffset)*a)*(l+p/2),this.rocketPosition.phi=(this.planetRotation+this.rocketLandingOffset)%360,this.rocketVelocity.x=0,this.rocketVelocity.y=0,this.rocketVelocity.phi=0;else{if(this.boost){let t={x:Math.cos(this.rocketPosition.phi*a)*d,y:Math.sin(this.rocketPosition.phi*a)*d};this.rocketVelocity.x+=t.x,this.rocketVelocity.y+=t.y}this.rotate>0?this.rocketVelocity.phi+=.05:this.rotate<0?this.rocketVelocity.phi-=.05:0===this.rotate&&(this.rocketVelocity.phi*=.99);let t=c*(k*y)/Math.pow(this.distanceBetweenCenters,2);this.gravity.x=t*this.planetToRocket.x,this.gravity.y=t*this.planetToRocket.y,this.rocketVelocity.x-=this.gravity.x,this.rocketVelocity.y-=this.gravity.y,this.rocketVelocity.phi%=360,this.rocketVelocity.x*=u,this.rocketVelocity.y*=u,this.rocketPosition.x+=this.rocketVelocity.x,this.rocketPosition.y+=this.rocketVelocity.y,!0===this.track_path?this.rocketPosition.phi=Math.atan2(this.rocketVelocity.y,this.rocketVelocity.x)/a:!1===this.track_path?this.rocketPosition.phi=Math.atan2(this.rocketVelocity.y,this.rocketVelocity.x)/a-180:this.rocketPosition.phi+=this.rocketVelocity.phi,this.rocketPosition.phi%=360,this.path_marks.push(this.rocketPosition.x),this.path_marks.push(this.rocketPosition.y),this.path_marks.length>v&&this.path_marks.splice(0,2),this.$refs.path_layer.getNode().draw()}},resizeCanvas(){this.resizeTrigger=!this.resizeTrigger},keydown(t){switch(t.keyCode){case 87:this.boost=!0,this.rocketLanded&&(this.rocketLanded=!1,this.track_path=!0,this.rocketPosition.phi=this.planetRotation+90,this.rocketVelocity.x=(this.planetToRocket.x+Math.cos(this.rocketPosition.phi*a))*f,this.rocketVelocity.y=(this.planetToRocket.y+Math.sin(this.rocketPosition.phi*a))*f);break;case 65:this.rocketLanded||(this.rotate=-1);break;case 68:this.rocketLanded||(this.rotate=1);break;case 70:this.rocketVelocity.phi=0,null===this.track_path?this.track_path=!0:this.track_path=null;break;case 32:this.track_path=!this.track_path;break;case 83:this.rocketLanded||(this.rotate=0);break;default:console.log(t.keyCode);break}},keyup(t){switch(t.keyCode){case 87:this.boost=!1;break;case 65:case 68:case 83:this.rocketLanded||(this.rotate=null);break}}},computed:{configKonva(){return this.resizeTrigger,{width:window.innerWidth,height:window.innerHeight}},planetConfig(){return{x:this.configKonva.width/2,y:this.configKonva.height/2,fill:"blue",rotation:this.planetRotation,radius:l}},rocketConfig(){return{points:[1,1],x:this.rocketPosition.x,y:this.rocketPosition.y,fill:"green",rotation:this.rocketPosition.phi,pointerWidth:4*p/5,pointerLength:p,stroke:"green"}},previewRocketConfig(){return{points:[0,0],x:this.configKonva.width/2,y:this.configKonva.height-50,fill:"green",rotation:this.rocketPosition.phi,pointerWidth:4*p/5,pointerLength:p,stroke:"green"}},rocketVectorConfig(){return{points:[2*this.rocketVelocity.x,2*this.rocketVelocity.y,5*this.rocketVelocity.x,5*this.rocketVelocity.y],x:this.rocketPosition.x,y:this.rocketPosition.y,fill:"red",stroke:"red",pointerWidth:3,pointerLength:3,visible:0!==this.rocketVelocity.x&&0!==this.rocketVelocity.y}},previewRocketVectorConfig(){return{points:[5*this.rocketVelocity.x,5*this.rocketVelocity.y,10*this.rocketVelocity.x,10*this.rocketVelocity.y],x:this.configKonva.width/2,y:this.configKonva.height-50,fill:"red",stroke:"red",pointerWidth:3,pointerLength:3,visible:0!==this.rocketVelocity.x&&0!==this.rocketVelocity.y}},gravityVectorConfig(){return{points:[5*-this.planetToRocket.x,5*-this.planetToRocket.y,10*-this.planetToRocket.x,10*-this.planetToRocket.y],x:this.rocketPosition.x,y:this.rocketPosition.y,fill:"blue",stroke:"blue",pointerWidth:3,pointerLength:3,visible:0!==this.planetToRocket.x&&0!==this.planetToRocket.y}},previewPlanetVectorConfig(){return{points:[0,0,50*-this.planetToRocket.x,50*-this.planetToRocket.y],x:this.configKonva.width/2,y:this.configKonva.height-50,fill:"blue",stroke:"blue",strokeWidth:0,pointerWidth:6,pointerLength:6}}}},w=x,b=(i("d851"),i("2877")),V=Object(b["a"])(w,s,h,!1,null,"1e6a89b8",null),P=V.exports,m={name:"App",components:{Game:P}},C=m,R=(i("5c0b"),Object(b["a"])(C,n,r,!1,null,null,null)),_=R.exports,T=i("2f62");o["default"].use(T["a"]);var L=new T["a"].Store({state:{},mutations:{},actions:{},modules:{}}),O=i("7591"),K=i.n(O);o["default"].use(K.a),o["default"].config.productionTip=!1,new o["default"]({store:L,render:function(t){return t(_)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"92fd":function(t,e,i){},"9c0c":function(t,e,i){},d851:function(t,e,i){"use strict";i("92fd")}});
//# sourceMappingURL=app.1c52995e.js.map